# План автоматизации

## Перечень автоматизируемых сценариев
**Набор карт, представленные в формате JSON в файле data.json.:**
* 4444 4444 4444 4441, status "APPROVED"
* 4444 4444 4444 4442, status "DECLINED"

**Валидные данные карт при заполнении полей ввода:**
* Поле "Номер карты": 16 цифр.
* Поле "Месяц": в формате от 01 до 12, но не ранее текущего месяца.
* Поле "Год": последние две цифры номера года(23, 24, 25, 26, 27, 28), но не ранее от текущей даты и не более 5 лет от текущего года.
* Поле "Владелец": буквы латинского алфавита (Name Lastname). 
* Поле "CVC": в формате 3-х цифр.

**Тестируемые Базы данных:**
* MySql
* PostgreSQL

**Тестовые сценарии**

*Шаги воспроизведения*
1. Открыть код программы в IDEA.
2. Запустить Docker в терминале с помощью команды docker-compose up.
3. Запустить БД.
4. Запустить сервис в терминале с помощью команды  java -jar ./artifacts/aqa-shop.jar -P:jdbc.url=mysql://localhost:3306/app -P:jdbc.user=app -P:jdbc.password=pass.
5. Открыть страницу приложения веб-сервиса, который предлагает купить тур по дебетовой карте и в кредит http://localhost:8080.
6. Позитивные сценарии:
* Нажать кнопку "Купить". В появившихся полях ввести валидные данные карты 4444 4444 4444 4441 со статусом "APPROVED". Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение "Успешно. Операция одобрена банком".
* Нажать кнопку "Купить в кредит". В появившихся полях ввести валидные данные карты 4444 4444 4444 4441 со статусом "APPROVED". Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение "Успешно. Операция одобрена банком".
* Нажать кнопку "Купить". В появившихся полях ввести валидные данные карты 4444 4444 4444 4442 со статусом "DECLINED". Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Ошибка! Банк отказал в проведении операции".
* Нажать кнопку "Купить в кредит". В появившихся полях ввести валидные данные карты 4444 4444 4444 4442 со статусом "DECLINED". Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Ошибка! Банк отказал в проведении операции".
7. Негативные сценарии:
* Нажать кнопку "Купить". Поле "Номер карты" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". Поле "Номер карты" заполнить неверный номер карты 5452 4566 2626 2622. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". Поле "Номер карты" заполнить менее 16 знаков. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". Поле "Месяц" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". Поле "Месяц" заполнить цифрами от 0 до 9. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". Поле "Месяц" заполнить числами от 13 до 99. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить". В поле "Месяц" указать предыдущий месяц, любой до текущего. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить". В поле "Месяц" указать 00. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить". Поле "Год" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". В поле "Год" указать 00. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Истёк срок действия карты".
* Нажать кнопку "Купить". В поле "Год" указать предыдущий год до текущего. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Истёк срок действия карты".
* Нажать кнопку "Купить". В поле "Год" указать год +6 лет к текущему году(29). Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить". Поле "Владелец" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Поле обязательно для заполнения".
* Нажать кнопку "Купить". В поле "Владелец" указать цифры. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". В поле "Владелец" указать спецсимволы. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". В поле "Владелец" ввести более 60 символов. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". В поле "Владелец" ввести один символ. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Поле обязательно для заполнения".
* Нажать кнопку "Купить". Поле "CVC/CVV" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить". В поле "CVC/CVV" указать менее трёх цифр. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".

* Нажать кнопку "Купить в кредит". Поле "Номер карты" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". Поле "Номер карты" заполнить неверный номер карты 5452 4566 2626 2622. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". Поле "Номер карты" заполнить менее 16 знаков. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". Поле "Месяц" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". Поле "Месяц" заполнить цифрами от 0 до 9. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". Поле "Месяц" заполнить числами от 13 до 99. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить в кредит". В поле "Месяц" указать предыдущий месяц, любой до текущего. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить в кредит". В поле "Месяц" указать 00. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить в кредит". Поле "Год" оставляем пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". В поле "Год" указать 00. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Истёк срок действия карты".
* Нажать кнопку "Купить в кредит". В поле "Год" указать предыдущий год до текеущего. Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Истёк срок действия карты".
* Нажать кнопку "Купить в кредит". В поле "Год" указать год +6 лет к текущему году(29). Остальные поля заполнить корректными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверно указан срок действия карты".
* Нажать кнопку "Купить в кредит". Поле "Владелец" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Поле обязательно для заполнения".
* Нажать кнопку "Купить в кредит". В поле "Владелец" указать цифры. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". В поле "Владелец" указать спецсимволы. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". В поле "Владелец" ввести более 60 символов. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". В поле "Владелец" ввести один символ. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Поле обязательно для заполнения".
* Нажать кнопку "Купить в кредит". Поле "CVC/CVV" оставить пустым. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".
* Нажать кнопку "Купить в кредит". В поле "CVC/CVV" указать менее трёх цифр. Остальные поля заполнить валидными значениями. Нажать кнопку "Продолжить". Ожидаемый результат: появилось сообщение об ошибке "Неверный формат".

## Перечень используемых инструментов с обоснованием выбора
* **IDE:** IntelliJ IDEA Community Edition 2023.1.
*  **Java:** OpenJDK 11.
* **JUnit** - платформа для написания авто-тестов и их запуска, возможность создавать параметризованные тесты.
* **Allure** - наглядные отчеты, подробные сценариии выполнения каждого теста.
* **Selenide** - более лаконичный синтаксис, по сравнению с selenuim, автоматические скриншоты.
* **Docker Compose, Docker** - инструменты для запуска мультиконтейнерных приложений.

## Перечень и описание возможных рисков при автоматизации
* Отсутсвие ТЗ и документации к сервису.
* Проблемы с запуском контейнеров, БД и SUT.
* Несоотвествие с составленным планом тестирования, рабочая система и реальные данные предположительно будут отличаться от SUT и тестовых данных.

## Интервальная оценка с учётом рисков в часах
* Настройка тестового окружения - 8
* Планирование автоматизации тестирования - 6 
* Написание и отладка автотестов - 24 
* Прогон тестов и заведение issue - 10 
* Подготовка отчета по итогам автоматизированного тестирования - 6 
* Подготовка отчета по итогам автоматизации - 8 
* Итого: 62 часа

## План сдачи работ: когда будут готовы автотесты, результаты их прогона
* Настройка тестового окружения - 26.05.2023 
* Планирование автоматизации тестирования - 30.05.2023 
* Написание и откладка автотестов - 05.06.2023 
* Подготовка отчётных документов по итогам автоматизированного тестирования- 08.06.2023 
* Подготовка отчётных документов по итогам автоматизации. - 12.06.2023

